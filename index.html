<!DOCTYPE html><html><head><title>dev.toihrk.me</title><link href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css" rel="stylesheet" type="text/css"><link href="/layout.css" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><link href="/github-markdown.css" rel="stylesheet" type="text/css"><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css" rel="stylesheet" type="text/css"><link href="/page.css" rel="stylesheet" type="text/css"><link href="/2015/07/18/lesson-vim.html" rel="canonical"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js" type="text/javascript"></script></head><body><header class="pure-u-1-1"><a href="/"><h1>dev.toihrk.me</h1></a></header><div id="articleContainer"><article><div class="publish-date"><time datetime="2015-07-18" pubdate><span class="date-year"><a href="/archives/2015.html">2015</a>/</span><span class="date-month"><a href="/archives/2015-07.html">07</a>/</span><span class="date-day">18</span></time></div><div class="markdown-body"><h1 id="-vim-2015-07-18-lesson-vim-html-"><a href="/2015/07/18/lesson-vim.html">vimに入門する</a></h1>
<p>仕事がひとまず片付いたのでプライベートでVimに入門してみようと思う。</p>
<p>エディターは仕事ではAtomとEmacsを使っていて、Atomを採用しているのも「21世紀になってスクリーンエディタなんか使ってられるかよ」みたいな感じで、いざスクリーンエディタをGitかなんかで起動されるとEmacsが起動するようになっている。Emacsも本来GNU Emacsが起動される前提で設定を作っているのでターミナル上で起動されると素のEmacsになってしまう。</p>
<p>Emacsで全部できれば良いのだけれど、それも無理な話で、設定肥やすのにもelispがどうにもこうにもアレなので、この際Vimに入門してみようと思う。</p>
<p>目標は、この際AtomもEmacsも捨てて基本的にプライベートも仕事もVimでコードなりなんなりが書けるようになること。時間があったら、「22世紀のエディタってこうなってるよね」みたいなエディタを自作してみたい、Electronで。</p>
<h2 id="-">環境</h2>
<ul>
<li>OS X 10.10.2</li>
<li>zsh</li>
<li>vim 7.4.712</li>
</ul>
<p>vimはbrewでインストールした。</p>
<h2 id="-">前準備</h2>
<p>いたずら心というかなんというか、zshで以下のような設定をしていたので、コメントアウトする。</p>
<pre><code>alias vi=&quot;emacs&quot;
alias vim=&quot;emacs&quot;
</code></pre><h2 id="-">事始め</h2>
<p>Vimのことを何にも知らないので少し調べる。
学生時代、3つだか4つだか上の先輩は、「キーの同時押しができなかった時代のエディタだからEmacsより高尚なエディタだ」とかって言ってたけれど、今は2015年だしキーバインドはEmacsの方が優れていると思う。</p>
<p>ただ、思ったところにカーソルが動かせるVimmerにはすごく憧れる。</p>
<p><strong>ちなみに宗教戦争をする気は毛頭ない。本当に不毛な話題なのでみんな好きなエディタ使えばいいと思う。</strong></p>
<p><a href="http://vim.rtorr.com/lang/ja/">Vim Cheat Sheet</a></p>
<p>当分の間はこれを見ながらやっていくと思う。</p>
<h2 id="vimrc-">vimrcをつくる</h2>
<p>早速Vimを使う。</p>
<pre><code>$ vim ~/.vimrc
</code></pre><p>ネットから拾ってきたものをインサートモード(i)にしてコピペする。</p>
<pre><code>filetype plugin indent on

syntax on

set nowrap

set hlsearch
set ignorecase
set smartcase

set autoindent

set ruler
set number
set list
set wildmenu
set showcmd

set shiftwidth=4
set softtabstop=4
set expandtab
set tabstop=4
set smarttab

set clipboard=unnamed
</code></pre><p><code>:w</code>として保存し、<code>:source ~/.vimrc</code>とすると設定が反映する。</p>
<h2 id="neobundle-">NeoBundleを導入する</h2>
<p><a href="https://github.com/Shougo/neobundle.vim">Shougo/neobundle.vim</a></p>
<p>便利そうなので導入する。</p>
<pre><code> $ curl https://raw.githubusercontent.com/Shougo/neobundle.vim/master/bin/install.sh &gt; install.sh
 $ sh ./install.sh
</code></pre><h2 id="neobundle-">NeoBundleでなんかいれてみる</h2>
<p>以下のように書いた。</p>
<pre><code>set runtimepath+=~/.vim/bundle/neobundle.vim/
call neobundle#begin(expand(&#39;~/.vim/bundle/&#39;))
NeoBundleFetch &#39;Shougo/neobundle.vim&#39;

NeoBundle &#39;altercation/vim-colors-solarized&#39;
NeoBundle &#39;scrooloose/nerdtree&#39;
NeoBundle &#39;Townk/vim-autoclose&#39;
NeoBundle &#39;grep.vim&#39;
NeoBundle &#39;Shougo/neocomplcache&#39;


call neobundle#end()
</code></pre><p>特に設定は書いてないので、ちょこちょこいじっていく。</p>
<h3 id="altercation-vim-colors-solarized">altercation/vim-colors-solarized</h3>
<p><a href="https://github.com/altercation/solarized">altercation/solarized</a></p>
<p>カラースキームをいれた。</p>
<pre><code>syntax enable
set background=dark
colorscheme solarized
</code></pre><h3 id="scrooloose-nerdtree">scrooloose/nerdtree</h3>
<p><a href="https://github.com/scrooloose/nerdtree">scrooloose/nerdtree</a></p>
<p>ディレクトリをツリー表示できるやつ。
入れるだけで特に設定は必要ないっぽいけれど起動するたびに<code>:NERDTreeToggle</code>とタイプするのは面倒なので、キーマップを書く。</p>
<pre><code>nnoremap &lt;silent&gt;&lt;C-e&gt; :NERDTreeToggle&lt;CR&gt;
</code></pre><p><code>Control+e</code>で起動できるようになる。</p>
<h3 id="townk-vim-autoclose">Townk/vim-autoclose</h3>
<p><a href="https://github.com/Townk/vim-autoclose">Townk/vim-autoclose</a></p>
<p>括弧とかを自動で閉じてくれるやつ。特に設定の必要はない。</p>
<h3 id="grep-vim">grep.vim</h3>
<p><a href="https://github.com/vim-scripts/grep.vim">vim-scripts/grep.vim</a></p>
<p>grepしてくれるやつ。GithubのリポジトリのREADMEに使い方が詳しく書いてある。  </p>
<h3 id="shougo-neocomplcache">Shougo/neocomplcache</h3>
<p><a href="https://github.com/Shougo/neocomplcache.vim">Shougo/neocomplcache.vim</a></p>
<p>入力補完するやつ。</p>
<p><a href="https://github.com/e-jigsaw/dotfiles/blob/master/.vimrc">e-jigsaw/dotfiles/blob/master/.vimrc</a>
を参考にした。</p>
<pre><code>let g:acp_enableAtStartup = 0
let g:neocomplcache_enable_at_startup = 1
let g:neocomplcache_enable_smart_case = 1
let g:neocomplcache_min_syntax_length = 3
let g:neocomplcache_lock_buffer_name_pattern = &#39;\*ku\*&#39;
inoremap &lt;silent&gt; &lt;CR&gt; &lt;C-r&gt;=&lt;SID&gt;my_cr_function()&lt;CR&gt;
function! s:my_cr_function()
  return neocomplcache#smart_close_popup() . &quot;\&lt;CR&gt;&quot;
endfunction
inoremap &lt;expr&gt;&lt;TAB&gt;  pumvisible() ? &quot;\&lt;C-n&gt;&quot; : &quot;\&lt;TAB&gt;&quot;
inoremap &lt;expr&gt;&lt;C-h&gt; neocomplcache#smart_close_popup().&quot;\&lt;C-h&gt;&quot;
inoremap &lt;expr&gt;&lt;BS&gt; neocomplcache#smart_close_popup().&quot;\&lt;C-h&gt;&quot;
inoremap &lt;expr&gt;&lt;C-y&gt;  neocomplcache#close_popup()
inoremap &lt;expr&gt;&lt;C-e&gt;  neocomplcache#cancel_popup()
</code></pre><h2 id="vim-rails-">VimでRailsアプリを書く</h2>
<p>仕事でもプライベートでもここ最近はRailsアプリ、もといRubyのコードしか書いていないので、とりあえずRubyが書けてかつRailsアプリを書く上でも便利な感じにしたい。</p>
<p>2年前の記事だけど、参考にした。</p>
<p><a href="http://qiita.com/alpaca_taichou/items/ab2ad83ddbaf2f6ce7fb">vim使っているrubyistで、これ入れていないのはヤバいプラグインまとめ 9個 (2013-10-04更新) - Qiita</a></p>
<h2 id="-vimrc">最終的なvimrc</h2>
<p><a href="https://gist.github.com/65cd4cbfa691b06b578e.git">https://gist.github.com/65cd4cbfa691b06b578e.git</a></p>
<p>ちょこちょこエラーを直していこうと思ってる。</p>
<p>整理してちゃんと管理してるリポジトリにも早く加えたい。</p>
<p><a href="https://github.com/toihrk/dotfiles">toihrk/dotfiles</a></p>
</div><div class="btns"><a id="issue" href="https://github.com/toihrk-me/dev-blog/issues" data-icon="octicon-issue-opened" data-style="mega" data-count-api="/repos/toihrk-me/dev-blog#open_issues_count" data-count-aria-label="# issues on GitHub" aria-label="Issue toihrk-me/dev-blog on GitHub" class="github-button">Issue</a></div><script src="/page.js" type="text/javascript"></script></article></div><footer class="pure-u-1-1"><ul><li><a href="https://github.com/toihrk-me/dev-blog" data-icon="octicon-eye" data-count-href="/toihrk-me/dev-blog/watchers" data-count-api="/repos/toihrk-me/dev-blog#subscribers_count" data-count-aria-label="# watchers on GitHub" aria-label="Watch toihrk-me/dev-blog on GitHub" class="github-button">Watch</a></li><li><a href="https://github.com/toihrk-me/dev-blog" data-icon="octicon-star" data-count-href="/toihrk-me/dev-blog/stargazers" data-count-api="/repos/toihrk-me/dev-blog#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star toihrk-me/dev-blog on GitHub" class="github-button">Star</a></li><li><a href="https://github.com/toihrk" aria-label="Follow @toihrk on GitHub" class="github-button">Follow @toihrk</a></li></ul><ul><li><a href="/archives" class="button">Archives</a></li><li><a href="http://toihrk.me" class="button">About me</a></li><li><span id="copyright">&copy; 2015 toihrk. All rights reserved.</span></li></ul><script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script></footer></body></html>